/**
 * KONFIGURASI TEKS & SURAT
 * Versi Lengkap: Penyemangat, Doa Rezeki, Sholat, & Permintaan Maaf Tulus
 */
const defaultConfig = {
  partner_name: 'Dika Rahadian', 
  anniversary_date: 'Always by Your Side',
  love_letter: ` Hallo Sayanggg ğŸ’•

Surat ini aku tulis khusus untuk kamu, laki-laki paling hebat yang pernah aku temui dalam hidupku. Aku tidak tahu bagaimana caranya dunia mempertemukan kita, tapi aku tahu satu hal: kehadiranmu adalah salah satu hal terbaik yang pernah Tuhan titipkan dalam hidupku. Aku tahu belakangan ini duniamu terasa begitu berisik, pundakmu terasa begitu berat, dan hari-harimu seperti pendakian panjang yang tak kunjung menemukan puncaknya. Sebagai anak pertama, aku tahu ada beban yang tidak terlihat yang harus kamu pikul setiap hariâ€”beban yang sering kali tidak bisa kamu ceritakan pada siapa pun.

Ada ekspektasi, ada tanggung jawab, dan ada keharusan untuk selalu terlihat kuat di hadapan semua orang. Kamu terbiasa menyembunyikan lelahmu di balik senyum dan diam. Tapi dengarkan aku baik-baik, ya. Di sini, bersamaku, kamu tidak perlu selalu menjadi pahlawan. Kamu tidak harus selalu kuat. Kamu boleh rapuh, kamu boleh lelah, kamu boleh merasa tidak baik-baik saja, dan kamu tetap akan kucintai dengan cara yang sama. Di hadapanku, kamu cukup menjadi manusia biasa yang sedang berjuang sebaik yang kamu bisa.

Aku melihat betapa kerasnya kamu berjuang. Aku melihat bagaimana kamu sering mengabaikan lelahmu sendiri demi orang-orang yang kamu sayangi. Kamu adalah definisi pejuang yang sesungguhnyaâ€”pejuang yang tidak banyak bicara, tapi selalu berusaha. Namun aku juga melihat binar matamu yang kadang meredup karena beban yang terlalu lama dipendam. Sayang, aku ingin kamu tahu bahwa aku benar-benar bangga padamu. Bukan hanya karena apa yang kamu capai, tapi karena ketulusan hatimu dan ketangguhan jiwamu dalam menghadapi badai yang datang silih berganti.

Mungkin ada hari-hari di mana kamu merasa sendirian di tengah keramaian. Merasa harus menyelesaikan semuanya sendiri agar tidak merepotkan siapa pun. Merasa tidak punya ruang untuk mengeluh karena kamu takut terlihat lemah. Tapi tolong, ingat satu hal ini dengan sungguh-sungguh: aku adalah rumahmu. Aku adalah tempat pulangmu. Tempat di mana kamu bisa meletakkan semua beban, melepas semua topeng, dan beristirahat tanpa rasa takut dihakimi. Kamu tidak perlu memikul dunia sendirian selama aku ada di sampingmu.

Aku bukan hanya ingin berada di sisimu saat kamu bahagia dan berhasil. Aku ingin menjadi orang yang memelukmu paling erat saat duniamu terasa runtuh. Aku ingin menjadi bahumu ketika kakimu mulai goyah. Aku ingin menjadi alasan kecil yang membuatmu bertahan satu hari lagi ketika kamu merasa hampir menyerah.

Jangan pernah ragu akan kehadiranku, ya. Aku tidak akan mudah pergi. Aku tidak akan meninggalkanmu hanya karena keadaan menjadi sulit. Aku memilihmu bukan hanya untuk hari-hari yang bahagia, tapi juga untuk hari-hari paling berat yang mungkin harus kita lewati. Masalahmu adalah masalahku. Lelahmu adalah lelahku. Kita adalah satu tim, dan aku tidak akan membiarkan orang yang aku cintai berjuang sendirian.

Aku tahu kamu lelah. Aku tahu ada saat-saat di mana kamu ingin menghilang sejenak dari semua tekanan. Tidak apa-apa jika kamu merasa tidak baik-baik saja. Tidak apa-apa jika hari ini kamu hanya mampu bertahan. Kamu tidak harus selalu kuat setiap waktu. Melangkah pelan pun tidak apa-apa, asalkan kita masih saling menggenggam. Aku akan selalu ada di siniâ€”menjadi pengingat bahwa kamu berharga dan tidak pernah sendirian.

Dan jika selama ini kehadiranku justru pernah merepotkanmu, aku sungguh minta maaf. Maaf jika aku kadang terlalu banyak bertanya, terlalu sensitif, atau belum selalu bisa memahami caramu menghadapi dunia. Maaf jika aku belum sepenuhnya mampu menerima semua keadaanmu dengan sempurna. Aku masih belajar, masih berproses, dan masih berusaha menjadi pendamping yang lebih dewasa dan lebih mengerti. Percayalah, bukan karena aku tidak peduli, tapi karena hatiku terlalu takut kehilanganmu.

Di balik semua kerja kerasmu, aku selalu menyelipkan namamu dalam setiap doaku. Dalam sujud-sujudku, aku menyebut namamu dengan penuh harap. Aku memohon kepada Sang Pemilik Semesta agar setiap langkahmu dijaga, setiap lelahmu dihitung sebagai pahala, dan setiap peluhmu digantikan dengan keberkahan yang berlipat ganda. Semoga Allah melapangkan pintu rezekimu, memudahkan segala urusanmu, dan mengabulkan niat-niat baikmu.

Aku tahu betapa besarnya keinginanmu untuk menjadi sandaran bagi keluargamu. Aku tahu kamu ingin menjadi laki-laki yang bisa dibanggakan. Percayalah, Tuhan Maha Melihat. Tidak ada satu pun pengorbananmu yang sia-sia.

Sayang, sesibuk apa pun duniamu, sesulit apa pun hidup menekanmu, tolong jangan pernah tinggalkan sujudmu. Tetaplah menjaga sholatmu. Karena di sanalah kamu bisa benar-benar menyerahkan beban yang terlalu berat untuk kamu pikul sendiri. Aku ingin kita tidak hanya bersama di dunia ini, tapi aku berharap Tuhan menuntun kita pada akhir yang sama jika memang itu yang terbaik menurut-Nya.

Jujur dari hatiku yang paling dalam, aku berharap kamu tidak pernah meninggalkanku. Aku berharap aku tetap menjadi perempuan yang kamu pilih, bahkan ketika keadaan tidak mudah dan segalanya terasa rumit. Aku berharap aku selalu menjadi tempat yang kamu tuju ketika lelahmu memuncak dan dunia terasa terlalu berat.

Aku menyimpan semua ucapanmu tentang masa depan kita dengan sangat hati-hati di hatiku. Setiap harapan yang pernah kamu ucapkan padaku, setiap niat baik yang pernah kamu ceritakan tentang ingin tetap bersamaku di masa depan, aku doakan diam-diam agar semuanya benar-benar terwujud. Semoga Allah mengabulkan setiap niat baikmu, menguatkan langkahmu, dan menyatukan arah langkah kita jika memang itu yang telah Dia rencanakan.

Aku tidak meminta janji . Aku hanya berharap kamu tetap tinggal, tetap memilih, dan tetap berjuang bersamaku. Jangan pergi hanya karena keadaan tidak selalu baik-baik saja. Jangan menyerah hanya karena jalan kita tidak selalu mudah. Selama kamu masih menggenggam tanganku, aku akan bertahan bersamamu, apa pun yang terjadi.

Kamu adalah laki-laki baik. Kebaikanmu, kerja kerasmu, dan pengorbananmu tidak akan pernah sia-sia. Tuhan melihat setiap tetes keringatmu, dan aku merasakan setiap ketulusanmu. Terima kasih sudah bertahan sejauh ini. Terima kasih karena tidak menyerah meski jalannya tidak selalu mudah. Kamu lebih dari sekadar cukup. Kamu adalah segalanya bagiku.

Janji ya? Jika suatu hari duniamu terasa terlalu berat, bicaralah padaku. Jangan dipendam sendirian. Aku mungkin tidak selalu punya solusi, tapi aku punya hati yang selalu siap mendengar dan bahu yang selalu siap menjadi tempatmu bersandar. Aku akan selalu memilihmuâ€”hari ini, esok, dan selama Tuhan masih mengizinkan.

Istirahatlah sejenak jika penat itu datang lagi. Tarik napas dalam-dalam, dan dengarkan detak jantungmu. Di setiap detaknya, ada doaku yang tak pernah berhenti menyebut namamu.

Aku menyayangimu lebih dari yang bisa diungkapkan oleh kata-kata.

Tetaplah kuat. Dunia mungkin kejam, tapi semoga cintaku padamu tidak akan pernah menjadi tempat yang menyakitkan. Aku di sini, tetap di sini, dan akan selalu di sini. Bersamamu, selama kamu memilih untuk tinggal.

I Love u Moreâ¤ï¸
Putri Triani`
};

let config = { ...defaultConfig };

// LOGIN LOGIC
const SECRET_CODE = '031122';
let enteredCode = '';

function enterCode(digit) {
  if (enteredCode.length < 6) {
    enteredCode += digit;
    updateCodeDisplay();
    if (enteredCode.length === 6) {
      setTimeout(checkCode, 300);
    }
  }
}

function deleteLastCode() {
  enteredCode = enteredCode.slice(0, -1);
  updateCodeDisplay();
  hideError();
}

function clearCode() {
  enteredCode = '';
  updateCodeDisplay();
  hideError();
}

function updateCodeDisplay() {
  for (let i = 1; i <= 6; i++) {
    const dot = document.getElementById(`dot-${i}`);
    if (dot) {
      i <= enteredCode.length ? dot.classList.add('filled') : dot.classList.remove('filled');
    }
  }
}

function checkCode() {
  if (enteredCode === SECRET_CODE) {
    unlockApp();
  } else {
    showError();
    enteredCode = '';
    updateCodeDisplay();
  }
}

function showError() { 
  const errorMsg = document.getElementById('error-msg');
  if(errorMsg) errorMsg.style.opacity = '1'; 
}

function hideError() { 
  const errorMsg = document.getElementById('error-msg');
  if(errorMsg) errorMsg.style.opacity = '0'; 
}

function unlockApp() {
  document.getElementById('login-page').classList.remove('active');
  document.getElementById('main-app').classList.add('active');
  
  const music = document.getElementById('bgMusic');
  if(music) {
    music.play().catch(e => console.log("Audio playback waiting for interaction"));
  }
  
  startHeartsAnimation();
}

function showSection(section) {
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.classList.remove('active');
    if (btn.textContent.toLowerCase().includes(section)) btn.classList.add('active');
  });
  
  document.getElementById('home-section').classList.add('hidden');
  document.getElementById('gallery-section').classList.add('hidden');
  document.getElementById('letter-section').classList.add('hidden');
  
  const targetSection = document.getElementById(`${section}-section`);
  if(targetSection) targetSection.classList.remove('hidden');
}

function createHeart() {
  const container = document.getElementById('hearts-container');
  if(!container) return;
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.innerHTML = ['ğŸ’•', 'â¤ï¸', 'âœ¨', 'ğŸ’ª', 'ğŸ›¡ï¸', 'ğŸ¤²'][Math.floor(Math.random() * 6)];
  heart.style.left = Math.random() * 100 + '%';
  heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
  heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
  container.appendChild(heart);
  setTimeout(() => heart.remove(), 8000);
}

function startHeartsAnimation() {
  for (let i = 0; i < 15; i++) setTimeout(createHeart, i * 100);
  setInterval(() => { if (Math.random() > 0.5) createHeart(); }, 500);
}

async function onConfigChange(cfg) {
  config = { ...defaultConfig, ...cfg };
  
  const letterContent = document.getElementById('love-letter-content');
  if (letterContent && config.love_letter) {
    // Memisahkan paragraf berdasarkan double newline (\n\n)
    const paragraphs = config.love_letter.split('\n\n').filter(p => p.trim());
    // Merender paragraf dengan <p> dan menjaga single newline sebagai <br>
    letterContent.innerHTML = paragraphs.map(p => `<p style="margin-bottom: 1.5rem;">${p.replace(/\n/g, '<br>')}</p>`).join('');
  }

  const partnerNameDisplay = document.getElementById('partner-name-display');
  if (partnerNameDisplay) partnerNameDisplay.textContent = config.partner_name;
}

onConfigChange(config);